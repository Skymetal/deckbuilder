<template name="pregame">
    <!-- this: game -->

    <!-- Show player table with usernames, decks and ready -->
    <div class="row">
        {{#with players}}
            {{> pregame_player_table }}
        {{/with}}
    </div>

    <!-- Show the ready button when all players are ready -->
    <div class="row">
        <button class="btn btn-block
            {{#if allPlayersReady}}
                btn-success startGame
            {{else}}
                btn-disabled
            {{/if}}">
            Start!
        </button>
    </div>
</template>



<template name="pregame_player_table">
    <!-- this: players -->
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Username</th>
                <th>Selected Deck</th>
                <th>Ready</th>
            </tr>
        </thead>

        <tbody>
            {{#each this }}
                <tr>
                    {{> pregame_player_tabledata }}
                </tr>
            {{/each}}
        </tbody>
    </table>
</template>

<template name="pregame_player_tabledata">
    <!-- this: player -->
    <td>{{username}}</td>

    <td>
        {{#if mine}}
            {{>pregame_deckdropdown}}
        {{else}}
            <span>{{deckname}}</span>
        {{/if}}
    </td>

    <td>
        <button
            class="btn
                {{#if mine}} btn-action-ready btn-default
                    {{else}}btn-disabled
                {{/if}}

                {{#if ready}} btn-success
                {{/if}}"
        >Ready</button>
    </td>
</template>

<template name="pregame_deckdropdown">
    <!-- this: player -->
    <div class="dropdown">
        <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">
            <span> {{deckname}} </span> <span class="caret"></span>
        </button>

        <ul class="dropdown-menu" role="menu">
            {{#each decks}}
                <li class="game-dc-dropdown-item" role="presentation"><a role="menuitem" tabindex="-1" href="#">{{name}}</a></li>
            {{/each}}
        </ul>
    </div>
</template>